class Solution {
    public int numTrees(int n) {
        if (n < 2) {
            return 1;
        }
        
        int[] countPossi = new int[n + 1];
        countPossi[0] = 1;
        countPossi[1] = 1;
        
        for (int num = 2; num <= n; num++) {
            int i = 0;
            int j = num - 1;
            while (i < j) {
                countPossi[num] += countPossi[i++] * countPossi[j--];
            }
            countPossi[num] *= 2;
            if (i == j) {
                countPossi[num] += countPossi[i] * countPossi[j];
            }
        }
        
        return countPossi[n];
    }
}

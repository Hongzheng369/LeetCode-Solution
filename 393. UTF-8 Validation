class Solution {
    public boolean validUtf8(int[] data) {
        int bitToProcess = 0;
        int num1 = 1 << 7;
        int num2 = 1 << 6;

        for (int i = 0; i < data.length; i++) {
            if (bitToProcess == 0) {
                int temp = 1 << 7;
                while ((temp & data[i]) != 0) {
                    bitToProcess++;
                    temp = temp >> 1;
                }

                if (bitToProcess == 0) {
                    continue;
                }

                if (bitToProcess > 4 || bitToProcess == 1) {
                    return false;
                }
            }

            else {
                if (!((num1 & data[i]) != 0 && (num2 & data[i]) == 0)) {
                    return false;
                }
            }

            bitToProcess--;
        }

        return bitToProcess == 0;
    }
}
